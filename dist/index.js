var PositionObserver=function(){"use strict";const w=e=>e!=null&&typeof e=="object"||!1,p=e=>w(e)&&typeof e.nodeType=="number"&&[1,2,3,4,5,6,7,8,9,10,11].some(t=>e.nodeType===t)||!1,l=e=>p(e)&&e.nodeType===1||!1,v=e=>typeof e=="function"||!1,k="1.0.1",b="PositionObserver Error";class y{entries;static version=k;_tick;_root;_callback;constructor(t,i){if(!v(t))throw new Error(`${b}: ${t} is not a function.`);this.entries=new Map,this._callback=t,this._root=l(i?.root)?i.root:document?.documentElement,this._tick=0}observe=t=>{if(!l(t))throw new Error(`${b}: ${t} is not an instance of HTMLElement.`);this._root.contains(t)&&this._new(t).then(i=>{this.getEntry(t)||this.entries.set(t,i),this._tick||(this._tick=requestAnimationFrame(this._runCallback))})};unobserve=t=>{this.entries.has(t)&&this.entries.delete(t)};_runCallback=()=>{if(!this.entries.size)return;const t=new Promise(i=>{const c=[];this.entries.forEach(async({target:s,boundingClientRect:n})=>{this._root.contains(s)&&await this._new(s).then(({boundingClientRect:r,isVisible:h})=>{const{left:a,top:u,bottom:f,right:_}=r;if(n.top!==u||n.left!==a||n.right!==_||n.bottom!==f){const o={target:s,boundingClientRect:r,isVisible:h};this.entries.set(s,o),c.push(o)}})}),i(c)});this._tick=requestAnimationFrame(async()=>{const i=await t;i.length&&this._callback(i,this),this._runCallback()})};_new=t=>{const{clientWidth:i,clientHeight:c}=this._root;return new Promise(s=>{new IntersectionObserver(([{boundingClientRect:r}],h)=>{h.disconnect();const{left:a,top:u,bottom:f,right:_,width:o,height:m}=r,E=u>1-m&&a>1-o&&f<=c+m-1&&_<=i+o-1;s({target:t,isVisible:E,boundingClientRect:r})}).observe(t)})};getEntry=t=>this.entries.get(t);disconnect=()=>{cancelAnimationFrame(this._tick),this.entries.clear(),this._tick=0}}return y}();
//# sourceMappingURL=index.js.map
