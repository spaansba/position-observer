"use strict";const v=e=>e!=null&&typeof e=="object"||!1,y=e=>v(e)&&typeof e.nodeType=="number"&&[1,2,3,4,5,6,7,8,9,10,11].some(t=>e.nodeType===t)||!1,m=e=>y(e)&&e.nodeType===1||!1,k=e=>typeof e=="function"||!1,E="1.0.0",i=new Map,p="PositionObserver Error";class O{static entries=i;static version=E;_tick;_root;_callback;constructor(t,s){if(!k(t))throw new Error(`${p}: ${t} is not a function.`);this._callback=t,this._root=m(s?.root)?s.root:document?.documentElement,this._tick=0}observe=t=>{if(!m(t))throw new Error(`${p}: ${t} is not an instance of HTMLElement.`);this._root.contains(t)&&this._new(t).then(s=>{this.getEntry(t)||i.set(t,s),this._tick||(this._tick=requestAnimationFrame(this._runCallback))})};unobserve=t=>{i.has(t)&&i.delete(t)};_runCallback=()=>{if(!i.size)return;const t=new Promise(s=>{const h=[];i.forEach(async({target:n,boundingClientRect:o})=>{this._root.contains(n)&&await this._new(n).then(({boundingClientRect:r,isVisible:a})=>{const{left:f,top:u,bottom:_,right:l}=r;if(o.top!==u||o.left!==f||o.right!==l||o.bottom!==_){const c={target:n,boundingClientRect:r,isVisible:a};i.set(n,c),h.push(c)}})}),s(h)});requestAnimationFrame(async()=>{const s=await t;s.length&&this._callback(s,this),this._runCallback()})};_new=t=>{const{clientWidth:s,clientHeight:h}=this._root;return new Promise(n=>{new IntersectionObserver(([{boundingClientRect:r}],a)=>{a.disconnect();const{left:f,top:u,bottom:_,right:l,width:c,height:b}=r,w=u>1-b&&f>1-c&&_<=h+b-1&&l<=s+c-1;n({target:t,isVisible:w,boundingClientRect:r})}).observe(t)})};getEntry=t=>i.get(t);disconnect=()=>{cancelAnimationFrame(this._tick),i.clear(),this._tick=0}}module.exports=O;
//# sourceMappingURL=index.cjs.map
