"use strict";const _=n=>n!=null&&typeof n=="object"||!1,d=n=>_(n)&&typeof n.nodeType=="number"&&[1,2,3,4,5,6,7,8,9,10,11].some(t=>n.nodeType===t)||!1,a=n=>d(n)&&n.nodeType===1||!1,g=n=>typeof n=="function"||!1,b="PositionObserver Error";class m{entries;_tick;_root;_callback;constructor(t,i){if(!g(t))throw new Error(`${b}: ${t} is not a function.`);this.entries=[],this._callback=t,this._root=a(i?.root)?i.root:document?.documentElement,this._tick=0}observe=t=>{if(!a(t))throw new Error(`${b}: ${t} is not an instance of HTMLElement.`);if(!this._root.contains(t)||this.getEntry(t))return;const i=this._new(t);this.entries.push(i),this._tick||(this._tick=requestAnimationFrame(this._runCallback))};unobserve=t=>{const i=this.entries.findIndex(e=>e.target===t);i>-1&&this.entries.splice(i,1)};_runCallback=()=>{if(!this.entries.length)return;const t=[];this.entries.forEach((i,e)=>{const{target:s,boundingBox:o}=i;if(!this._root.contains(s))return;const{boundingBox:r,isVisible:c}=this._new(s),{left:l,top:h,bottom:u,right:f}=r;(o.left!==l||o.top!==h||o.right!==f||o.bottom!==u)&&(this.entries[e].boundingBox=r,this.entries[e].isVisible=c,t.push({target:s,boundingBox:r,isVisible:c}))}),t.length&&this._callback(t),requestAnimationFrame(this._runCallback)};_new=t=>{const{clientWidth:i,clientHeight:e}=this._root,s=t.getBoundingClientRect(),{left:o,top:r,bottom:c,right:l,width:h,height:u}=s,f=r>1-u&&o>1-h&&c<=e+u-1&&l<=i+h-1;return{target:t,isVisible:f,boundingBox:s}};getEntry=t=>this.entries.find(i=>i.target===t);disconnect=()=>{cancelAnimationFrame(this._tick),this.entries.length=0,this._tick=0}}module.exports=m;
//# sourceMappingURL=index.cjs.map
